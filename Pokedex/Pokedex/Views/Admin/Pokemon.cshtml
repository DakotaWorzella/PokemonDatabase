@model IEnumerable<Pokedex.DataAccess.Models.Pokemon>;
@{
    Layout = "_Layout";
}

@section styles
{
    <link href="/css/tabContent.css" rel="stylesheet" type="text/css" />
    <link href="/css/typechart.css" rel="stylesheet" type="text/css" />
    <style>
        main {
            max-width: 1220px !important;
        }
    </style>
}

@section scripts
{
    <script src="/js/tabContent.js" type="text/javascript"></script>
}

@if(User.IsInRole("Owner"))
{
    <p class="additionButtons">
        <a class="btn btn-primary" href="@Url.Action("Pokemon", "Add")" role="button">Add Pokemon</a>
        <a class="btn btn-primary" href="@Url.Action("Evolution", "Add")" role="button">Add Evolution</a>
    </p>
}
<div class="tab-list">
    @foreach(var id in Model.Select(x => x.Generation.Id).Distinct().OrderBy(x => x))
    {
        @if (id.IndexOf('-') == -1)
        {
            <button class="tab" onclick="openPage(event, 'Generation@(id)')">Generation @id</button>
        }
    }
</div>
@foreach(var gen in Model.Select(x => x.Generation.Id).Distinct().OrderBy(x => x))
{
    @if(@gen.IndexOf('-') == -1)
    {
        <div class="tabcontent generation" id="Generation@(gen)">
            <table class="table">
                <tr>
                    <th scope="col">Pokedex Number</th>
                    <th scope="col">Name</th>
                    <th scope="col">Actions</th>
                </tr>
                @foreach(var item in Model.Where(x => (x.Generation.Id == @gen) || (x.Generation.Id.IndexOf('-') > -1 && x.Generation.Id.Substring(0, x.Generation.Id.IndexOf('-')) == @gen)))
                {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.Name.Replace('_', ' ')</td>
                        <td>
                            <div class="btn-group">
                                <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Edit</button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="@(Url.Action("Pokemon", "Edit", new { id = item.Id }))">Edit Pokemon</a>
                                    <a class="dropdown-item" href="@(Url.Action("Typing", "Edit", new { id = item.Id }))">Edit Typing</a>
                                    <a class="dropdown-item" href="@(Url.Action("Abilities", "Edit", new { id = item.Id }))">Edit Abilities</a>
                                    <a class="dropdown-item" href="@(Url.Action("EggGroups", "Edit", new { id = item.Id }))">Edit Egg Groups</a>
                                    <a class="dropdown-item" href="@(Url.Action("BaseStats", "Edit", new { id = item.Id }))">Edit Base Stats</a>
                                    <a class="dropdown-item" href="@(Url.Action("EVYields", "Edit", new { id = item.Id }))">Edit EV Yields</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                }
            </table>
        </div>
    }
}
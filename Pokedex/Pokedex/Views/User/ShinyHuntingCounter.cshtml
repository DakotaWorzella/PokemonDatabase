@model Pokedex.Models.ShinyHuntingViewModel
@{
    Layout = "_Layout";
    ViewBag.Title = "Shiny Hunts";
    int huntCount;
}

@section styles
{
    <link href="/css/pageLookup.css" rel="stylesheet" type="text/css" />
    <style>
        .shinyHunts {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            width: 130px;
            margin: 2.5px 0;
        }
    </style>
}

@section scripts
{
    <script src="/js/pageLookup.js"></script>
}

<p>
    <a class="btn btn-primary" href="@this.Url.Action("BeginShinyHunt", "User")" role="button">Begin Shiny Hunt</a>
</p>
<div class="pageButtons">
    <button class="huntsInProgress active" onclick="lookupPage('huntsInProgress')">Hunts In Progress</button>
    <button class="huntsCompleted" onclick="lookupPage('huntsCompleted')">Hunts Completed</button>
    <button class="huntsFailed" onclick="lookupPage('huntsFailed')">Hunts Failed</button>
</div>
<div class="page active" id="huntsInProgress">
    @if (Model.InProgressHunts.Count > 0)
    {
        huntCount = 0;
        <div class="shinyHunts pokemonList">
            <div class="grid-container">
                @foreach (var hunts in Model.InProgressHunts)
                {
                    huntCount++;
                    <div class="shadowed @hunts.Pokemon.Name">
                        <div class="pokemonImages">
                            <img class="pokemonlistPicture" title="@hunts.Pokemon.Name" src="@Url.Content(string.Concat(@Model.PokemonImageLocation, @hunts.PokemonId, ".png").Replace("normal", "shiny"))">
                        </div>
                        <div class="description">
                            @hunts.Pokemon.Name (@hunts.Game.Name)
                            <br>
                            @hunts.ShinyHuntingTechnique.Name (@hunts.ShinyAttemptCount Attempts)
                            <br>
                            <a class="btn btn-primary" href="@this.Url.Action("ContinueHunt", "User", new { huntId = @huntCount })">@(hunts.ShinyAttemptCount == 0 ? "Begin Hunt" : "Continue Hunt")</a>
                            <a class="bottomBtn btn btn-danger" href="@this.Url.Action("RemoveHunt", "User", new { huntId = @huntCount, huntProgress="InProgress" })">Delete Hunt</a>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="noPokemonHunting">No Pok√©mon are being hunted right now.</div>
    }
</div>
<div class="page" id="huntsCompleted">
    @if (Model.CompletedHunts.Count > 0)
    {
        huntCount = 0;
        <div class="shinyHunts pokemonList">
            <div class="grid-container">
                @foreach (var hunts in Model.CompletedHunts)
                {
                    huntCount++;
                    <div class="shadowed @hunts.Pokemon.Name">
                        <div class="pokemonImages">
                            <img class="pokemonlistPicture" title="@hunts.Pokemon.Name" src="@Url.Content(string.Concat(@Model.PokemonImageLocation, @hunts.PokemonId, ".png").Replace("normal", "shiny"))">
                        </div>
                        <div class="description">
                            @hunts.Pokemon.Name (@hunts.Game.Name)
                            <br>
                            @hunts.ShinyHuntingTechnique.Name (@hunts.ShinyAttemptCount Attempts)
                            <br>
                            <a class="btn btn-danger" href="@this.Url.Action("RemoveHunt", "User", new { huntId = @huntCount, huntProgress="Completed" })">Delete Hunt</a>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="noPokemonHunting">No hunts have been completed.</div>
    }
</div>
<div class="page" id="huntsFailed">
    @if (Model.FailedHunts.Count > 0)
    {
        huntCount = 0;
        <div class="shinyHunts pokemonList">
            <div class="grid-container">
                @foreach (var hunts in Model.FailedHunts)
                {
                    huntCount++;
                    <div class="shadowed @hunts.Pokemon.Name">
                        <div class="pokemonImages">
                            <img class="pokemonlistPicture" title="@hunts.Pokemon.Name" src="@Url.Content(string.Concat(@Model.PokemonImageLocation, @hunts.PokemonId, ".png").Replace("normal", "shiny"))">
                        </div>
                        <div class="description">
                            @hunts.Pokemon.Name (@hunts.Game.Name)
                            <br>
                            @hunts.ShinyHuntingTechnique.Name (@hunts.ShinyAttemptCount Attempts)
                            <br>
                            <a class="btn btn-success" href="@this.Url.Action("RetryHunt", "User", new { huntId = @huntCount })">Retry Hunt</a>
                            <a class="btn btn-danger" href="@this.Url.Action("RemoveHunt", "User", new { huntId = @huntCount, huntProgress="Failed" })">Delete Hunt</a>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="noPokemonHunting">No hunts have been failed.</div>
    }
</div>
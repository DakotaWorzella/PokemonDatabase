@model IEnumerable<PokemonDatabase.Models.PokemonViewModel>
@{
    Layout = "_Layout";
}

<link href="/css/TabContent.css" rel="stylesheet" type="text/css" />
<link href="/css/typechart.css" rel="stylesheet" type="text/css" />
<script src="/js/TabContent.js"></script>
@if(Model.Count() > 1)
{
    <div class="tab-list">
        @foreach(var button in Model)
        {
            @if(button == Model.First())
            {
                <button class="tab active" onclick="openPage(event, '@button.pokemon.Name')">@button.pokemon.Name.Replace('_', ' ')</button>
            }
            else
            {
                <button class="tab" onclick="openPage(event, '@button.pokemon.Name')">@button.pokemon.Name.Replace('_', ' ')</button>
            }
        }
    </div>
}
@foreach(var item in Model)
{
    <div class="tabcontent@(@item == @Model.First() ? " active" : "")" id="@item.pokemon.Name">
        <div class="pokemonPicture"><img width="100" title="@item.pokemon.Name.Replace('_', ' ')" src="@Url.Content("/images/pokemon/" + @item.pokemon.Name.Replace(":".ToString(), string.Empty) + ".png")" /></div>
        <div class="pokemonName">
            <b>
                @if (item.pokemon.Id.IndexOf('-') > -1)
                {
                    @("#")@item.pokemon.Id.Substring(0, item.pokemon.Id.IndexOf('-'))
                }
                else
                {
                    @("#")@item.pokemon.Id
                }

                @item.pokemon.Name.Replace('_', ' ')
            </b>
            (@item.pokemon.Classification.Name)
        </div>
        <div class="typing">
            @for(int i = 0; i < item.types.Count; i++)
            {
                <div class="pokemon-type type-icon type-@item.types[i].Name.ToLower()">@item.types[i].Name</div>
            }
        </div>
        <div class="genderRatios">
            <b>Gender Ratio:</b>
            @if (item.pokemon.GenderRatio.MaleRatio == 0 && item.pokemon.GenderRatio.FemaleRatio == 0)
            {
                @("Genderless");
            }
            else
            {
                if (item.pokemon.GenderRatio.FemaleRatio == 0)
                {
                    @item.pokemon.GenderRatio.MaleRatio@("% Male");
                }
                else if (item.pokemon.GenderRatio.MaleRatio == 0)
                {
                    @item.pokemon.GenderRatio.FemaleRatio@("% Female");
                }
                else
                {
                    @item.pokemon.GenderRatio.MaleRatio@("% Male / ")@item.pokemon.GenderRatio.FemaleRatio@("% Female");
                }
            }
        </div>
        <div class="abilities"><b>Abilities:</b> 
            @for(int i = 0; i < item.abilities.Count; i++)
            {
                if (i > 0)
                {
                    @(" / ");
                }

                <span title="Description: @item.abilities[i].Description">
                    @item.abilities[i].Name

                    @if (i + 1 == item.abilities.Count && i != 0)
                    {
                        @(" (Hidden)");
                    }
                </span>
            }
        </div>
        <div class="baseStats">
            <h4>Base Stats (@item.baseStats.StatTotal Total)</h4>
            <table class="baseStatTable">
                <tr>
                    <th scope="col">Health</th>
                    <th scope="col">Attack</th>
                    <th scope="col">Defense</th>
                    <th scope="col">Special Attack</th>
                    <th scope="col">Special Defense</th>
                    <th scope="col">Speed</th>
                </tr>
                <tr>
                    <td>@item.baseStats.Health</td>
                    <td>@item.baseStats.Attack</td>
                    <td>@item.baseStats.Defense</td>
                    <td>@item.baseStats.SpecialAttack</td>
                    <td>@item.baseStats.SpecialDefense</td>
                    <td>@item.baseStats.Speed</td>
                </tr>
            </table>
        </div>
        <div class="effectivenessChart">
            @if (item.effectiveness.strongAgainst.Count > 0)
            {
                <table class="strongAgainstTable">
                    <tr>
                        <th>Resistances</th>
                    </tr>
                    @foreach(string s in item.effectiveness.strongAgainst)
                    {
                        <tr>
                            @if (@s.IndexOf(" Quad") > -1)
                            {
                                <td>
                                    <div class="pokemon-type type-icon type-@s.ToLower().Substring(0, @s.IndexOf(" Quad"))">@s.Substring(0, @s.IndexOf(" Quad"))</div>
                                    <div class="pokemon-type quad-icon quad-resist">Quad Resist</div>
                                </td>
                            }
                            else
                            {
                                <td class="pokemon-type type-icon type-@s.ToLower()">@s</td>
                            }
                        </tr>
                    }
                </table>
            }
            @if (item.effectiveness.weakAgainst.Count > 0)
            {
                <table class="weakAgainstTable">
                    <tr>
                        <th>Weaknesses</th>
                    </tr>
                    @foreach(string w in item.effectiveness.weakAgainst)
                    {
                        <tr>
                            @if (@w.IndexOf(" Quad") > -1)
                            {
                                <td>
                                    <div class="pokemon-type type-icon type-@w.ToLower().Substring(0, @w.IndexOf(" Quad"))">@w.Substring(0, @w.IndexOf(" Quad"))</div>
                                    <div class="pokemon-type quad-icon quad-weak">Quad Weak</div>
                                </td>
                            }
                            else
                            {
                                <td class="pokemon-type type-icon type-@w.ToLower()">@w</td>
                            }
                        </tr>
                    }
                </table>
            }
            @if (item.effectiveness.immuneTo.Count > 0)
            {
                <table class="immuneToTable">
                    <tr>
                        <th>Immunities</th>
                    </tr>
                    @foreach(string i in item.effectiveness.immuneTo)
                    {
                        <tr>
                            <td class="pokemon-type type-icon type-@i.ToLower()">@i</td>
                        </tr>
                    }
                </table>
            }
        </div>
    </div>
}